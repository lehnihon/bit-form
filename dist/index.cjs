"use strict";var n=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var y=(e,t)=>{for(var s in t)n(e,s,{get:t[s],enumerable:!0})},f=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of l(t))!c.call(e,a)&&a!==s&&n(e,a,{get:()=>t[a],enumerable:!(i=h(t,a))||i.enumerable});return e};var k=e=>f(n({},"__esModule",{value:!0}),e);var p={};y(p,{BitFormStore:()=>o,createPatternMask:()=>d,currencyMask:()=>u});module.exports=k(p);var o=class{initialValues;state;touched={};errors={};masks;unmasks;validator;isValidating=!1;listeners=new Set;constructor(t,s){this.initialValues=JSON.parse(JSON.stringify(t)),this.state=JSON.parse(JSON.stringify(t)),this.masks=s?.masks||{},this.unmasks=s?.unmasks||{},this.validator=s?.validator,this.applyMasks()}getState=()=>this.state;getErrors=()=>this.errors;getTouched=()=>this.touched;isDirty=()=>JSON.stringify(this.state)!==JSON.stringify(this.initialValues);getRawState=()=>{let t={...this.state};for(let s in this.unmasks)t[s]!==void 0&&(t[s]=this.unmasks[s](t[s]));return t};setState=async t=>{let s={...t};for(let i in s)this.masks[i]&&(s[i]=this.masks[i](s[i]));this.state={...this.state,...s},await this.validate(),this.notify()};markTouched=t=>{this.touched[t]||(this.touched[t]=!0,this.notify())};reset=()=>{this.state=JSON.parse(JSON.stringify(this.initialValues)),this.touched={},this.errors={},this.applyMasks(),this.notify()};subscribe=t=>(this.listeners.add(t),()=>this.listeners.delete(t));notify=()=>this.listeners.forEach(t=>t());applyMasks(){for(let t in this.masks)this.state[t]!==void 0&&(this.state[t]=this.masks[t](this.state[t]))}async validate(){if(!this.validator)return;let t=this.validator(this.state);t instanceof Promise?(this.isValidating=!0,this.notify(),this.errors=await t,this.isValidating=!1):this.errors=t}};var d=e=>t=>{if(!t)return"";let s=t.replace(/\D/g,""),i="",a=0;for(let r=0;r<e.length&&a<s.length;r++)e[r]==="#"?i+=s[a++]:i+=e[r];return i},u=e=>{let t=typeof e=="string"?Number(e.replace(/\D/g,""))/100:e;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0)};0&&(module.exports={BitFormStore,createPatternMask,currencyMask});
