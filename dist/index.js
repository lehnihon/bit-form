var n=class{initialValues;state;touched={};errors={};masks;unmasks;validator;isValidating=!1;listeners=new Set;constructor(t,s){this.initialValues=JSON.parse(JSON.stringify(t)),this.state=JSON.parse(JSON.stringify(t)),this.masks=s?.masks||{},this.unmasks=s?.unmasks||{},this.validator=s?.validator,this.applyMasks()}getState=()=>this.state;getErrors=()=>this.errors;getTouched=()=>this.touched;isDirty=()=>JSON.stringify(this.state)!==JSON.stringify(this.initialValues);getRawState=()=>{let t={...this.state};for(let s in this.unmasks)t[s]!==void 0&&(t[s]=this.unmasks[s](t[s]));return t};setState=async t=>{let s={...t};for(let i in s)this.masks[i]&&(s[i]=this.masks[i](s[i]));this.state={...this.state,...s},await this.validate(),this.notify()};markTouched=t=>{this.touched[t]||(this.touched[t]=!0,this.notify())};reset=()=>{this.state=JSON.parse(JSON.stringify(this.initialValues)),this.touched={},this.errors={},this.applyMasks(),this.notify()};subscribe=t=>(this.listeners.add(t),()=>this.listeners.delete(t));notify=()=>this.listeners.forEach(t=>t());applyMasks(){for(let t in this.masks)this.state[t]!==void 0&&(this.state[t]=this.masks[t](this.state[t]))}async validate(){if(!this.validator)return;let t=this.validator(this.state);t instanceof Promise?(this.isValidating=!0,this.notify(),this.errors=await t,this.isValidating=!1):this.errors=t}};var h=e=>t=>{if(!t)return"";let s=t.replace(/\D/g,""),i="",r=0;for(let a=0;a<e.length&&r<s.length;a++)e[a]==="#"?i+=s[r++]:i+=e[a];return i},l=e=>{let t=typeof e=="string"?Number(e.replace(/\D/g,""))/100:e;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0)};export{n as BitFormStore,h as createPatternMask,l as currencyMask};
